<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Naz & Buz Denizi</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: linear-gradient(#b0e0ff, #ffffff);
  font-family: Arial, sans-serif;
}

#game {
  position: relative;
  width: 100vw;
  height: 100vh;
}

.player {
  position: absolute;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  text-align: center;
  line-height: 42px;
  font-size: 14px;
  font-weight: bold;
}

#naz {
  background: pink;
  left: 20px;
}

#sen {
  background: lightblue;
  right: 20px;
  bottom: 40%;
}

.ice {
  position: absolute;
  width: 90px;
  height: 22px;
  background: #e0f7fa;
  border-radius: 12px;
}

.breaking {
  background: #b2ebf2;
}

#hud {
  position: absolute;
  top: 10px;
  left: 10px;
  color: #01579b;
  font-weight: bold;
}

.heart {
  position: absolute;
  font-size: 24px;
  transition: all 1s linear;
}

#message {
  position: absolute;
  bottom: 20px;
  width: 100%;
  text-align: center;
  color: #c2185b;
  font-weight: bold;
}
</style>
</head>

<body>
<div id="game">
  <div id="hud">❤️❤️❤️</div>
  <div id="message"></div>
  <div id="naz" class="player">Naz</div>
  <div id="sen" class="player">Sen</div>
</div>

<script>
const game = document.getElementById("game");
const naz = document.getElementById("naz");
const hud = document.getElementById("hud");
const message = document.getElementById("message");

let y = window.innerHeight * 0.6;
let velocity = 0;
let gravity = 1.2;
let lives = 3;
let iceBlocks = [];

const romanticTexts = [
  "Düşsen bile ben buradayım ❤️",
  "Kalbim seni ayakta tutar",
  "Naz, seni hiçbir buz ayıramaz",
  "Aşk buzdan güçlüdür ❄️❤️"
];

function createIce() {
  const ice = document.createElement("div");
  ice.className = "ice";
  ice.style.left = window.innerWidth + "px";
  ice.style.top = (window.innerHeight * 0.65 + Math.random() * 120) + "px";
  ice.breaks = Math.random() < 0.4;
  if (ice.breaks) ice.classList.add("breaking");
  game.appendChild(ice);
  iceBlocks.push(ice);
}

setInterval(createIce, 1700);

function sendHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerText = "❤️";
  heart.style.left = (window.innerWidth - 60) + "px";
  heart.style.top = (window.innerHeight * 0.4) + "px";
  game.appendChild(heart);

  setTimeout(() => {
    heart.style.left = "40px";
    heart.style.top = y + "px";
  }, 50);

  setTimeout(() => heart.remove(), 1200);
}

function loseLife() {
  lives--;
  hud.innerText = "❤️".repeat(lives);
  message.innerText = romanticTexts[Math.floor(Math.random() * romanticTexts.length)];
  sendHeart();
  y = window.innerHeight * 0.6;
  velocity = 0;
}

function gameLoop() {
  velocity += gravity;
  y += velocity;

  let onIce = false;

  iceBlocks.forEach((ice, i) => {
    ice.style.left = (ice.offsetLeft - 2.5) + "px";

    if (
      ice.offsetLeft < naz.offsetLeft + 42 &&
      ice.offsetLeft + 90 > naz.offsetLeft &&
      y + 42 >= ice.offsetTop &&
      y + 42 <= ice.offsetTop + 12 &&
      velocity >= 0
    ) {
      onIce = true;
      velocity = 0;
      y = ice.offsetTop - 42;

      if (ice.breaks) {
        setTimeout(() => {
          ice.remove();
          iceBlocks.splice(i, 1);
        }, 500);
      }
    }

    if (ice.offsetLeft < -120) {
      ice.remove();
      iceBlocks.splice(i, 1);
    }
  });

  if (!onIce && y > window.innerHeight) {
    if (lives > 1) {
      loseLife();
    } else {
      alert("Naz’a ulaşamadın ama aşk kazandı ❤️");
      location.reload();
    }
  }

  naz.style.top = y + "px";
  requestAnimationFrame(gameLoop);
}

document.addEventListener("touchstart", () => {
  if (velocity === 0) velocity = -18;
});

document.addEventListener("click", () => {
  if (velocity === 0) velocity = -18;
});

gameLoop();
</script>
</body>
</html>
